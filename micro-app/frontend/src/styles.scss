@use '@angular/material' as mat;

@include mat.core();

// Custom color palettes based on your brand colors
// Primary: #0F808C (turquesa/teal)
$custom-primary-palette: (
  50: #e1f3f5,
  100: #b5e1e6,
  200: #84cdd5,
  300: #53b9c4,
  400: #2eaab8,
  500: #0f808c,  // Base color
  600: #0d7884,
  700: #0b6d79,
  800: #08636f,
  900: #045056,
  A100: #9ff0ff,
  A200: #6ce9ff,
  A400: #39e1ff,
  A700: #20ddff,
  contrast: (
    50: rgba(black, 0.87),
    100: rgba(black, 0.87),
    200: rgba(black, 0.87),
    300: rgba(black, 0.87),
    400: white,
    500: white,
    600: white,
    700: white,
    800: white,
    900: white,
    A100: rgba(black, 0.87),
    A200: rgba(black, 0.87),
    A400: rgba(black, 0.87),
    A700: rgba(black, 0.87),
  )
);

// Accent/Secondary: #035AA6 (azul medio)
$custom-accent-palette: (
  50: #e0ecf5,
  100: #b3d0e6,
  200: #80b1d5,
  300: #4d92c4,
  400: #267ab8,
  500: #035aa6,  // Base color
  600: #03529e,
  700: #024895,
  800: #023f8b,
  900: #012e7b,
  A100: #a8c9ff,
  A200: #75aaff,
  A400: #428bff,
  A700: #287cff,
  contrast: (
    50: rgba(black, 0.87),
    100: rgba(black, 0.87),
    200: rgba(black, 0.87),
    300: white,
    400: white,
    500: white,
    600: white,
    700: white,
    800: white,
    900: white,
    A100: rgba(black, 0.87),
    A200: rgba(black, 0.87),
    A400: white,
    A700: white,
  )
);

// Warn palette (mantiene el rojo para mensajes de error)
$custom-warn-palette: (
  50: #ffebee,
  100: #ffcdd2,
  200: #ef9a9a,
  300: #e57373,
  400: #ef5350,
  500: #f44336,
  600: #e53935,
  700: #d32f2f,
  800: #c62828,
  900: #b71c1c,
  A100: #ff8a80,
  A200: #ff5252,
  A400: #ff1744,
  A700: #d50000,
  contrast: (
    50: rgba(black, 0.87),
    100: rgba(black, 0.87),
    200: rgba(black, 0.87),
    300: rgba(black, 0.87),
    400: white,
    500: white,
    600: white,
    700: white,
    800: white,
    900: white,
    A100: rgba(black, 0.87),
    A200: white,
    A400: white,
    A700: white,
  )
);

// Define palettes usando las paletas personalizadas
$micro-app-primary: mat.define-palette($custom-primary-palette, 500);
$micro-app-accent: mat.define-palette($custom-accent-palette, 500);
$micro-app-warn: mat.define-palette($custom-warn-palette);

// Define theme
$micro-app-theme: mat.define-light-theme((
  color: (
    primary: $micro-app-primary,
    accent: $micro-app-accent,
    warn: $micro-app-warn,
  ),
  typography: mat.define-typography-config(),
  density: 0,
));

@include mat.all-component-themes($micro-app-theme);

// CSS Custom Properties para los colores adicionales
:root {
  // Colores principales
  --primary-color: #0F808C;
  --secondary-color: #035AA6;
  --tertiary-color: #0511F2;
  --success-color: #027368;

  // Variaciones de primary
  --primary-light: #2eaab8;
  --primary-dark: #0b6d79;
  --primary-contrast: #ffffff;

  // Variaciones de secondary
  --secondary-light: #267ab8;
  --secondary-dark: #024895;
  --secondary-contrast: #ffffff;

  // Variaciones de tertiary
  --tertiary-light: #262bf8;
  --tertiary-dark: #040cee;
  --tertiary-contrast: #ffffff;

  // Variaciones de success
  --success-light: #039582;
  --success-dark: #01594f;
  --success-contrast: #ffffff;

  // Colores de estado
  --error-color: #f44336;
  --warning-color: #ff9800;
  --info-color: #2196f3;

  // Grises y backgrounds
  --background-color: #fafafa;
  --surface-color: #ffffff;
  --text-primary: rgba(0, 0, 0, 0.87);
  --text-secondary: rgba(0, 0, 0, 0.6);
  --text-disabled: rgba(0, 0, 0, 0.38);
  --divider-color: rgba(0, 0, 0, 0.12);
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html,
body {
  height: 100%;
}

body {
  font-family: Roboto, "Helvetica Neue", sans-serif;
  background-color: #fafafa;
}

// Responsive breakpoints
$breakpoints: (
  'xs': 0,
  'sm': 576px,
  'md': 768px,
  'lg': 992px,
  'xl': 1200px
);

// Mobile-first responsive mixins
@mixin respond-to($breakpoint) {
  @if map-has-key($breakpoints, $breakpoint) {
    @media (min-width: map-get($breakpoints, $breakpoint)) {
      @content;
    }
  }
}

// Container responsive
.container {
  width: 100%;
  padding-right: 16px;
  padding-left: 16px;
  margin-right: auto;
  margin-left: auto;

  @include respond-to('sm') {
    max-width: 540px;
  }

  @include respond-to('md') {
    max-width: 720px;
  }

  @include respond-to('lg') {
    max-width: 960px;
  }

  @include respond-to('xl') {
    max-width: 1140px;
  }
}

// Utility classes for mobile
.hide-mobile {
  @media (max-width: 767px) {
    display: none !important;
  }
}

.show-mobile {
  display: none !important;
  @media (max-width: 767px) {
    display: block !important;
  }
}

// Full width button for mobile
.full-width-mobile {
  @media (max-width: 767px) {
    width: 100%;
  }
}

// Spacing utilities
.mt-1 { margin-top: 8px; }
.mt-2 { margin-top: 16px; }
.mt-3 { margin-top: 24px; }
.mb-1 { margin-bottom: 8px; }
.mb-2 { margin-bottom: 16px; }
.mb-3 { margin-bottom: 24px; }
.p-1 { padding: 8px; }
.p-2 { padding: 16px; }
.p-3 { padding: 24px; }

// Color utility classes
.text-primary { color: var(--primary-color) !important; }
.text-secondary { color: var(--secondary-color) !important; }
.text-tertiary { color: var(--tertiary-color) !important; }
.text-success { color: var(--success-color) !important; }
.text-error { color: var(--error-color) !important; }
.text-warning { color: var(--warning-color) !important; }
.text-info { color: var(--info-color) !important; }

.bg-primary {
  background-color: var(--primary-color) !important;
  color: var(--primary-contrast) !important;
}
.bg-secondary {
  background-color: var(--secondary-color) !important;
  color: var(--secondary-contrast) !important;
}
.bg-tertiary {
  background-color: var(--tertiary-color) !important;
  color: var(--tertiary-contrast) !important;
}
.bg-success {
  background-color: var(--success-color) !important;
  color: var(--success-contrast) !important;
}

// Border utility classes
.border-primary { border-color: var(--primary-color) !important; }
.border-secondary { border-color: var(--secondary-color) !important; }
.border-tertiary { border-color: var(--tertiary-color) !important; }
.border-success { border-color: var(--success-color) !important; }

// Hover states usando los colores terciarios
.hover-tertiary:hover {
  background-color: var(--tertiary-color);
  color: var(--tertiary-contrast);
  transition: all 0.3s ease;
}

.hover-success:hover {
  background-color: var(--success-color);
  color: var(--success-contrast);
  transition: all 0.3s ease;
}

// Links con color secundario
a {
  color: var(--secondary-color);
  text-decoration: none;
  transition: color 0.3s ease;

  &:hover {
    color: var(--tertiary-color);
    text-decoration: underline;
  }

  &:active {
    color: var(--primary-color);
  }
}

// Personalización adicional de componentes Angular Material
.mat-mdc-raised-button.mat-tertiary {
  background-color: var(--tertiary-color);
  color: var(--tertiary-contrast);

  &:hover:not([disabled]) {
    background-color: var(--tertiary-dark);
  }
}

.mat-mdc-raised-button.mat-success {
  background-color: var(--success-color);
  color: var(--success-contrast);

  &:hover:not([disabled]) {
    background-color: var(--success-dark);
  }
}

// Chips y badges con colores personalizados
.mat-mdc-chip.mat-tertiary {
  background-color: var(--tertiary-color);
  color: var(--tertiary-contrast);
}

.mat-mdc-chip.mat-success {
  background-color: var(--success-color);
  color: var(--success-contrast);
}

// Cards con borde de color
.mat-mdc-card.card-primary {
  border-left: 4px solid var(--primary-color);
}

.mat-mdc-card.card-secondary {
  border-left: 4px solid var(--secondary-color);
}

.mat-mdc-card.card-tertiary {
  border-left: 4px solid var(--tertiary-color);
}

.mat-mdc-card.card-success {
  border-left: 4px solid var(--success-color);
}

// ============================================
// RESPONSIVE DESIGN FIXES FOR MOBILE (iPhone)
// ============================================

// Global responsive table container
.table-responsive {
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  width: 100%;

  table {
    min-width: 600px; // Asegura scroll horizontal en móvil

    @media (max-width: 600px) {
      font-size: 14px;

      th, td {
        padding: 8px 4px !important;
        white-space: nowrap;
      }
    }
  }
}

// Container padding responsive
.container {
  padding: 16px;

  @media (max-width: 600px) {
    padding: 8px;
  }
}

// Header responsive
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
  flex-wrap: wrap;
  gap: 12px;

  h1 {
    font-size: 24px;
    margin: 0;

    @media (max-width: 600px) {
      font-size: 20px;
    }
  }

  button[mat-fab] {
    @media (max-width: 600px) {
      transform: scale(0.9);
    }
  }
}

// Filters responsive
.filters, .filters-row {
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
  align-items: flex-start;

  @media (max-width: 600px) {
    gap: 8px;

    mat-form-field {
      width: 100%;
      min-width: 100%;
    }

    button {
      width: 100%;
    }
  }

  mat-form-field {
    flex: 1;
    min-width: 150px;

    @media (max-width: 600px) {
      flex: 1 1 100%;
      min-width: 100%;
    }
  }
}

.filter-actions {
  display: flex;
  gap: 8px;

  @media (max-width: 600px) {
    width: 100%;

    button {
      flex: 1;
    }
  }
}

// Cards responsive
.filters-card, .stats-cards {
  margin-bottom: 16px;

  @media (max-width: 600px) {
    margin-bottom: 12px;
  }
}

.stats-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 16px;

  @media (max-width: 600px) {
    grid-template-columns: 1fr;
    gap: 12px;
  }
}

.stat-card {
  mat-card-content {
    padding: 16px;

    @media (max-width: 600px) {
      padding: 12px;
    }
  }

  .stat-value {
    font-size: 28px;
    font-weight: 600;

    @media (max-width: 600px) {
      font-size: 24px;
    }
  }

  .stat-label {
    font-size: 14px;
    color: #666;

    @media (max-width: 600px) {
      font-size: 12px;
    }
  }
}

// Quick filters buttons
.quick-filters {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;

  button {
    @media (max-width: 600px) {
      font-size: 12px;
      padding: 0 12px;

      mat-icon {
        font-size: 18px;
        width: 18px;
        height: 18px;
      }
    }
  }
}

// Loading states
.loading {
  display: flex;
  justify-content: center;
  padding: 48px;

  @media (max-width: 600px) {
    padding: 32px 16px;
  }
}

// Empty states
.empty, .initial-state {
  text-align: center;
  padding: 48px 16px;

  @media (max-width: 600px) {
    padding: 32px 16px;
  }

  mat-icon {
    font-size: 48px;
    width: 48px;
    height: 48px;

    @media (max-width: 600px) {
      font-size: 36px;
      width: 36px;
      height: 36px;
    }
  }

  p {
    font-size: 16px;

    @media (max-width: 600px) {
      font-size: 14px;
    }
  }
}

// Summary cards responsive
.summary, .summary-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 16px;

  @media (max-width: 600px) {
    grid-template-columns: 1fr;
    gap: 12px;
  }
}

.summary-item {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 16px;

  @media (max-width: 600px) {
    padding: 12px;
    gap: 12px;
  }

  mat-icon {
    font-size: 40px;
    width: 40px;
    height: 40px;

    @media (max-width: 600px) {
      font-size: 32px;
      width: 32px;
      height: 32px;
    }
  }
}

// Form grid responsive
.form-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 16px;

  @media (max-width: 600px) {
    grid-template-columns: 1fr;
    gap: 8px;
  }

  .full-width {
    grid-column: 1 / -1;
  }
}

// Step actions (botones de navegación de formularios)
.step-actions {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  margin-top: 16px;
  flex-wrap: wrap;

  @media (max-width: 600px) {
    flex-direction: column;

    button {
      width: 100%;
    }
  }
}

// Dialog responsive
.mat-mdc-dialog-container {
  @media (max-width: 600px) {
    max-width: 95vw !important;
    width: 95vw !important;
    max-height: 90vh !important;
  }
}

.mat-mdc-dialog-content {
  @media (max-width: 600px) {
    padding: 12px !important;
  }
}

.mat-mdc-dialog-actions {
  @media (max-width: 600px) {
    flex-direction: column;
    padding: 8px !important;
    gap: 8px;

    button {
      width: 100%;
      margin: 0 !important;
    }
  }
}

// Toolbar responsive fixes
.toolbar {
  @media (max-width: 600px) {
    .mat-toolbar-row {
      padding: 0 8px !important;
    }
  }
}

// Stepper responsive
.mat-vertical-stepper-header {
  @media (max-width: 600px) {
    padding: 12px 8px !important;
  }
}

.mat-vertical-content {
  @media (max-width: 600px) {
    padding: 0 8px 8px 16px !important;
  }
}

// Mat-table responsive fixes
.mat-mdc-table {
  @media (max-width: 600px) {
    font-size: 14px;

    .mat-mdc-header-cell {
      font-size: 12px;
      padding: 8px 4px !important;
    }

    .mat-mdc-cell {
      padding: 8px 4px !important;
    }
  }
}

// Chips responsive
.mat-mdc-chip {
  @media (max-width: 600px) {
    font-size: 12px;
    min-height: 28px;
  }
}

// Botones de acción en tablas
.mat-mdc-icon-button {
  @media (max-width: 600px) {
    width: 36px;
    height: 36px;
    padding: 6px;

    .mat-icon {
      font-size: 20px;
      width: 20px;
      height: 20px;
    }
  }
}

// Snackbar responsive
.mat-mdc-snack-bar-container {
  @media (max-width: 600px) {
    margin: 8px !important;
    max-width: calc(100vw - 16px) !important;
  }
}

// Paginator responsive
.mat-mdc-paginator {
  @media (max-width: 600px) {
    .mat-mdc-paginator-container {
      flex-wrap: wrap;
      justify-content: center;
      padding: 8px !important;
      gap: 8px;
    }

    .mat-mdc-paginator-page-size {
      margin: 0 !important;
    }
  }
}

// Fix para botones flotantes (FAB) en móvil
.mat-mdc-fab, .mat-mdc-mini-fab {
  @media (max-width: 600px) {
    &.mat-mdc-fab {
      width: 48px;
      height: 48px;
    }
  }
}

// Asegurar que los mat-form-field tengan buen tamaño en móvil
mat-form-field {
  @media (max-width: 600px) {
    .mat-mdc-form-field-subscript-wrapper {
      font-size: 11px;
    }
  }
}

// Client info en tablas
.client-info {
  display: flex;
  flex-direction: column;
  gap: 2px;

  .client-name {
    font-weight: 500;
    font-size: 14px;

    @media (max-width: 600px) {
      font-size: 13px;
    }
  }

  .client-dui {
    font-size: 12px;
    color: #666;

    @media (max-width: 600px) {
      font-size: 11px;
    }
  }
}

// Touch-friendly: Asegurar que los elementos interactivos tengan tamaño mínimo
button, a, .mat-mdc-icon-button, .mat-mdc-button {
  min-height: 44px;
  min-width: 44px;

  @media (max-width: 600px) {
    // Los botones táctiles deben ser de al menos 44x44px para iOS
    &:not(.mat-mdc-icon-button) {
      min-height: 44px;
    }
  }
}

// Prevenir zoom en inputs en iOS
input, select, textarea {
  @media (max-width: 600px) {
    font-size: 16px !important; // iOS no hace zoom si el font-size es >= 16px
  }
}
